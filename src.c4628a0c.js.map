{"version":3,"sources":["js/app.js","index.js"],"names":["preview","original","description","refs","closeModalBtn","document","querySelector","overlay","galleryContainer","lightboxImage","lightbox","galleryMarkup","createGalleryMarkup","galleryItems","map","index","join","onGalleryItemClick","evt","addEventListener","onOverlayClick","onCloseModal","window","onKeyPress","preventDefault","target","nodeName","classList","toggle","src","dataset","source","alt","setAttribute","currentTarget","removeEventListener","removeAttribute","code","arrowRight","arrowLeft","showSlides","arrowR","slideIndex","Number","length","addLazySizesScript","script","createElement","integrity","crossOrigin","body","appendChild","addSrcAttrToLazyImages","querySelectorAll","forEach","img","insertAdjacentHTML","HTMLImageElement","prototype","console","log"],"mappings":"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","file":"src.c4628a0c.js","sourceRoot":"..\\src","sourcesContent":["export default [\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg',\n    description: 'Hokkaido Flower',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\n    description: 'Container Haulage Freight',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',\n    description: 'Aerial Beach View',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\n    description: 'Flower Blooms',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\n    description: 'Alpine Mountains',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\n    description: 'Mountain Lake Sailing',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\n    description: 'Alpine Spring Meadows',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\n    description: 'Nature Landscape',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\n    description: 'Lighthouse Coast Sea',\n  },\n];\n\n","import './sass/main.scss';\nimport galleryItems from './js/app.js';\n\nconst refs = {\n    closeModalBtn: document.querySelector('[data-action=\"close-lightbox\"]'),\n    overlay: document.querySelector('.lightbox__overlay'),\n    galleryContainer: document.querySelector('.js-gallery'),\n  lightboxImage: document.querySelector('.lightbox__image'),\n    lightbox: document.querySelector('.js-lightbox'),\n}\n\nconst galleryMarkup = createGalleryMarkup(galleryItems);\nrefs.galleryContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n\nfunction createGalleryMarkup(galleryItems) {\n  return galleryItems.map(({ preview, original, description }, index) => {\n    return `\n  <li class=\"gallery__item\">\n  <a\n    class=\"gallery__link\"\n    href=\"${original}\"\n  >\n    <img\n      loading=\"lazy\"\n      class=\"gallery__image lazyload\"\n      data-src=\"${preview}\"\n      data-source=\"${original}\"\n      alt=\"${description}\"\n      data-index = ${index}\n      width=\"392\"\n      height=\"240\"\n    />\n  </a>\n</li>\n`;\n  }).join('');\n}\n\nrefs.galleryContainer.addEventListener('click', onGalleryItemClick);\n \nfunction onGalleryItemClick(evt) {\n    refs.overlay.addEventListener('click', onOverlayClick);\n    refs.closeModalBtn.addEventListener('click', onCloseModal);\n    window.addEventListener('keydown', onKeyPress);\n  evt.preventDefault();\n  if (evt.target.nodeName !== 'IMG') {\n    return\n  }\n  \n    refs.lightbox.classList.toggle('is-open');\n    refs.lightboxImage.src = evt.target.dataset.source;\n  refs.lightboxImage.alt = evt.target.alt;\n  refs.lightboxImage.setAttribute('data-index', evt.target.dataset.index)\n}\n\nfunction onOverlayClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    \n    onCloseModal();\n  }\n}\n\nfunction onCloseModal() {\n    window.removeEventListener('keydown', onKeyPress);\n    refs.overlay.removeEventListener('click', onOverlayClick);\n    refs.closeModalBtn.removeEventListener('click', onCloseModal);\n    refs.lightbox.classList.toggle('is-open');\n    refs.lightboxImage.src = '';\n  refs.lightboxImage.alt = '';\n  refs.lightboxImage.removeAttribute('data-index');\n}\n\nfunction onKeyPress(evt) {\n  const ESC_KEY_CODE = 'Escape';\n  const isEscKey = evt.code === ESC_KEY_CODE;\n\n  if (isEscKey) {\n    onCloseModal();\n  }\n\n  const arrowRight = evt.code === 'ArrowRight';\n  const arrowLeft = evt.code === 'ArrowLeft';\n\n   if (arrowRight || arrowLeft) {\n    showSlides(arrowRight);\n  }\n}\n\nfunction showSlides(arrowR) {\n  let slideIndex;\n\n  if (arrowR) { slideIndex = Number(refs.lightboxImage.dataset.index) + 1; }\n  else { slideIndex = Number(refs.lightboxImage.dataset.index) - 1; }\n\n\n\n  if (slideIndex < 0) {\n    slideIndex = galleryItems.length + slideIndex;\n  }\n\n  if (slideIndex === galleryItems.length) {\n    slideIndex = 0;\n  }\n\n  refs.lightboxImage.src = galleryItems[slideIndex].original;\n  refs.lightboxImage.dataset.index = slideIndex;\n}\n\n\nif ('loading' in HTMLImageElement.prototype) {\n  console.log('Браузер поддерживает lazyload');\n  addSrcAttrToLazyImages();\n} else {\n  console.log('Браузер НЕ поддерживает lazyload');\n  addLazySizesScript();\n}\n\nfunction addLazySizesScript() {\n  const script = document.createElement('script');\n  script.src =\n    'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js';\n  script.integrity =\n    'sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==';\n  script.crossOrigin = 'anonymous';\n\n  document.body.appendChild(script);\n}\n\nfunction addSrcAttrToLazyImages() {\n  const lazyImages = document.querySelectorAll('img[loading=\"lazy\"]');\n\n  lazyImages.forEach(img => {\n    img.src = img.dataset.src;\n  });\n}\n"]}